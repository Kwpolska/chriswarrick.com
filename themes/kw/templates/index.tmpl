{#  -*- coding: utf-8 -*- #}
{% import 'index_helper.tmpl' as helper with context %}
{% import 'post_header.tmpl' as pheader with context %}
{% import 'comments_helper.tmpl' as comments with context %}
{% extends 'base.tmpl' %}

{% block content %}
<div class="postindex">
{% for post in posts %}
    <article class="h-entry post-{{ post.meta('type') }} postbox">
    {{ pheader.html_post_header(post) }}
    {% if index_teasers %}
    <div class="p-summary entry-summary">
    {{ post.text(teaser_only=True) }}
    {% else %}
    <div class="e-content entry-content">
    {{ post.text(teaser_only=False) }}
    {% endif %}
    </div>
    <footer class="post-footer"><a href="{{ post.permalink() }}" class="morelink">more</a>
    {% if not post.meta('nocomments') %}
        â€” <a href="{{ post.permalink() }}#disqus_thread">comments</a>
    {% endif %}
    </footer>
    </article>
{% endfor %}
</div>
{{ helper.html_pager() }}
{{ comments.comment_link_script() }}
{{ helper.mathjax_script(posts) }}
{% endblock %}

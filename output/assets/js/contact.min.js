$(document).ready(function(){jQuery.extend({postJSON:function(a,b,c){return jQuery.post(a,b,c,"json")}});$("#contact").submit(function(){var c=$("#name").val();var b=$("#mail").val();var e=$("#subject").val();var g=$("#sqrt").val();var f=$("#message").val();var d="";var a=false;$("#cg-name").removeClass("error");$("#cg-mail").removeClass("error");$("#cg-subject").removeClass("error");$("#cg-sqrt").removeClass("error");$("#cg-message").removeClass("error");if(c==""){$("#cg-name").addClass("error");$("#alertbox").html(d+'<div class="alert alert-error fade in"><button type="button" class="close" data-dismiss="alert">×</button> <strong>Failed!</strong> Reason: the <strong>Name</strong> field was empty.</div>');d=$("#alertbox").html();a=true}if(b==""){$("#cg-mail").addClass("error");$("#alertbox").html(d+'<div class="alert alert-error fade in"><button type="button" class="close" data-dismiss="alert">×</button> <strong>Failed!</strong> Reason: the <strong>Mail address</strong> field was empty.</div>');d=$("#alertbox").html();a=true}if(e==""){$("#cg-subject").addClass("error");$("#alertbox").html(d+'<div class="alert alert-error fade in"><button type="button" class="close" data-dismiss="alert">×</button> <strong>Failed!</strong> Reason: the <strong>Subject</strong> field was empty.</div>');d=$("#alertbox").html();a=true}if(parseInt(g)!="4"){$("#cg-sqrt").addClass("error");$("#alertbox").html(d+'<div class="alert alert-error fade in"><button type="button" class="close" data-dismiss="alert">×</button> <strong>Failed!</strong> Reason: wrong answer to <strong>sqrt(16)</strong> security question.</div>');d=$("#alertbox").html();a=true}if(f==""){$("#cg-message").addClass("error");$("#alertbox").html(d+'<div class="alert alert-error fade in"><button type="button" class="close" data-dismiss="alert">×</button> <strong>Failed!</strong> Reason: the <strong>Message</strong> field was empty.</div>');d=$("#alertbox").html();a=true}if(a==true){return false}$("#alertbox").html('<div class="alert alert-info fade in"><button type="button" class="close" data-dismiss="alert">×</button> <strong>Sending…</strong>');$.ajax({cache:false,type:"POST",url:"/php/contact-send-json.php",data:{name:c,mail:b,subject:e,sqrt:g,message:f},dataType:"json",}).done(function(h){if(h.status=="ok"){$("#alertbox").html('<div class="alert alert-success fade in"><button type="button" class="close" data-dismiss="alert">×</button> <strong>Done!</strong> The message has been successfully sent.  Please expect an answer in the next 24 hours, most likely in the CET afternoon.</div>')}else{if(h.status=="error"){$("#alertbox").html('<div class="alert alert-error fade in"><button type="button" class="close" data-dismiss="alert">×</button> <strong>Failed!</strong> An unknown error occurred.</div>')}else{if(h.status=="fields"){$("#alertbox").html('<div class="alert alert-error fade in"><button type="button" class="close" data-dismiss="alert">×</button> <strong>Failed!</strong> Some fields were empty, even though the JavaScript backend thought otherwise.</div>')}else{if(h.status=="sqrt"){$("#alertbox").html('<div class="alert alert-error fade in"><button type="button" class="close" data-dismiss="alert">×</button> <strong>Failed!</strong> sqrt test failed.</div>')}else{$("#alertbox").html('<div class="alert fade in"><button type="button" class="close" data-dismiss="alert">×</button> <strong>Broken!</strong> The Send service returned the following garbage:'+h+"</div>")}}}}});return false})});

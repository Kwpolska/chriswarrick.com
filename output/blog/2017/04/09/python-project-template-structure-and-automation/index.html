<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="How to structure a Python project and automate releases.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Structuring and automating a Python project with the Python Project Template | Chris Warrick</title>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
<link href="/assets/css/all.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="/rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (pl)" href="/pl/rss.xml">
<link rel="canonical" href="https://chriswarrick.com/blog/2017/04/09/python-project-template-structure-and-automation/">
<link rel="icon" href="/favicon.ico" sizes="16x16">
<!--[if lt IE 9]><script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]--><meta name="application-name" content="Chris Warrick">
<meta name="msapplication-starturl" content="https://chriswarrick.com/">
<meta name="msapplication-navbutton-color" content="#00aadd">
<meta name="theme-color" content="#00aadd">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="description" itemprop="description" content="How to structure a Python project and automate releases.">
<meta name="author" content="Chris Warrick">
<link rel="prev" href="/blog/2017/04/07/csv-is-not-a-standard/" title="CSV is not a standard" type="text/html">
<link rel="next" href="/blog/2017/06/08/apples-new-pricing-strategy-dont-buy-the-12-macbook/" title="Apple’s new pricing strategy: don't buy the 12″ MacBook" type="text/html">
<meta property="og:site_name" content="Chris Warrick">
<meta property="og:title" content="Structuring and automating a Python project with the Python Project Te">
<meta property="og:url" content="https://chriswarrick.com/blog/2017/04/09/python-project-template-structure-and-automation/">
<meta property="og:description" content="How to structure a Python project and automate releases.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-04-09T11:00:00+02:00">
<meta property="article:tag" content="guide">
<meta property="article:tag" content="Nikola">
<meta property="article:tag" content="projects">
<meta property="article:tag" content="PyPT">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@Kwpolska">
<link rel="alternate" hreflang="pl" href="/pl/blog/2017/04/09/python-project-template-structure-and-automation/">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-kw navbar-static-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-kw-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://chriswarrick.com/">
            <img src="/assets/img/logo.png" srcset="/assets/img/logo2x.png 2x" alt="Chris Warrick" id="logo"><span id="blog-title">Chris Warrick</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-kw-collapse">
            <ul class="nav navbar-nav">
<li>
<a href="/blog/">Archives</a>
                </li>
<li>
<a href="/blog/tags/">Tags</a>
                </li>
<li>
<a href="/contact/">Contact</a>
                </li>
<li>
<a href="/brand/">Brand</a>
                </li>
<li>
<a href="/kwbot/">KwBot</a>
                </li>
<li>
<a href="/projects/">Projects</a>
                </li>
<li>
<a href="/guides/">Guides</a>
                </li>
<li>
<a href="/search/">Search</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>            </li>
<li><a href="https://chriswarrick.com/pl/" rel="alternate" hreflang="pl">Polski</a></li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
        <div id="cookiecontainer"></div>
            
<article class="post-text h-entry hentry postpage postbox" itemscope="itemscope" itemtype="http://schema.org/Article"><header class="page-header"><h1 class="p-name entry-title" itemprop="headline name">
    <a href="/blog/2017/04/09/python-project-template-structure-and-automation/" class="u-url">Structuring and automating a Python project with the Python Project Template</a>
    </h1>

    <div class="metadata">
<a href="/blog/2017/04/09/python-project-template-structure-and-automation/" rel="bookmark" class="u-published"><time class="published dt-published" datetime="2017-04-09T11:00:00+02:00" itemprop="datePublished" title="2017-04-09 11:00">2017-04-09 11:00</time></a>
        <ul itemprop="keywords" class="tags">
<li class="section-bubble" style="background-color: #00b1a1"><a href="/programming/">Programming</a></li>
           <li><a class="tag p-category" href="/blog/tags/guide/" rel="tag">guide</a></li>
           <li><a class="tag p-category" href="/blog/tags/nikola/" rel="tag">Nikola</a></li>
           <li><a class="tag p-category" href="/blog/tags/projects/" rel="tag">projects</a></li>
           <li><a class="tag p-category" href="/blog/tags/pypt/" rel="tag">PyPT</a></li>
           <li><a class="tag p-category" href="/blog/tags/python/" rel="tag">Python</a></li>
        
<li class="shortlink-bubble"><a href="https://go.chriswarrick.com/pypt-blog" title="Short link to this article (go.chriswarrick.com/pypt-blog)"><i class="fa fa-link"></i> pypt-blog</a></li>        </ul>
<p class="guide-header">A <a href="/guides/">guide</a> about <span class="guide-topic">Python</span> for <span class="guide-platform">any platform</span></p>    </div>
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div class="lead"><div>
<p>To create a project that other people can use and contribute to, you need to
follow a specific directory structure. Moreover, releasing a new version should
be as simple and painless as possible. For my projects, I use a template that
has the structure already in place, and comes with automation for almost every
part of a release.</p>
</div></div>
<p>The <a class="reference external" href="https://github.com/Kwpolska/python-project-template">Python Project Template</a> is my approach to this. It comes with a good (IMO) structure and automation.</p>
<p>What does it include? A whole lot of things. Documentation, Sphinx
configuration, a simple test suite, a <tt class="docutils literal">setup.py</tt> file, some AUR stuff, and
perhaps the most important part — the <tt class="docutils literal">release</tt> script. It can automate a lot
of tasks that are part of a release.</p>
<p>You see, releasing a package is error-prone. There are a lot of things that can go wrong:</p>
<ul class="simple">
<li>Version numbers. They may appear in code comments, Sphinx configuration,
README files and documentation, and setup.py. Some people claim to have
“solutions” for this. Most of those solutions don’t work right — either they
import a file from the project (which may break if <tt class="docutils literal">__init__.py</tt> is too
magical), read a file from that place (which might not get included
properly), or use some setuptools extension to get the version from VCS or
whatever (which needs to be installed before the package). Using <tt class="docutils literal">sed</tt> to
fix the version numbers is much simpler.</li>
<li>Forgetting about changelogs.</li>
<li>Not updating translations or other important files.</li>
</ul>
<p>We’ve had quite a few botched releases in the <a class="reference external" href="https://getnikola.com/">Nikola</a> project. I wrote a
<a class="reference external" href="http://getnikola.github.io/releng/checklist.html">checklist</a> to prevent things like those. You may notice that the most
prominent step is to run a <tt class="docutils literal">release</tt> script. This step replaced 21 others —
now the checklist only talks about writing announcements, sending e-mails,
updating the website, and doing some GitHub stuff that is not yet automated.</p>
<p>The template promotes a <em>release early, release often</em> workflow: since making a
new release requires almost no human intervention, you might as well do it
every time you make a bunch of changes. In my projects, <em>everything</em> gets
automated, and it might as well be possible in yours.</p>
<div class="section" id="the-complete-feature-list-as-of-v2-1-5">
<h2>The complete feature list (as of v2.1.5)<a href="#the-complete-feature-list-as-of-v2-1-5" class="headerlink" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li>pre-configured Sphinx with:<ul>
<li>
<tt class="docutils literal">CONTRIBUTING.rst</tt> guide (used by GitHub when sending a pull request or an issue)</li>
<li><tt class="docutils literal">LICENSE.rst</tt></li>
<li>an empty <tt class="docutils literal">CHANGELOG.rst</tt>
</li>
<li><tt class="docutils literal">README.rst</tt></li>
<li>a bare-bones <tt class="docutils literal">index.rst</tt> page</li>
</ul>
</li>
<li>The exact same files in <tt class="docutils literal">/</tt>, which are fragile and <strong>MAY NOT</strong> be modified
as they are replaced with copies in <tt class="docutils literal">/docs</tt> by the <tt class="docutils literal">release</tt> script</li>
<li>
<tt class="docutils literal">__init__.py</tt>, <tt class="docutils literal">__main__.py</tt> and <tt class="docutils literal">template.py</tt> files in the Python package directory</li>
<li>A <tt class="docutils literal">setup.py</tt> file that could be good enough for people, and that supports
<tt class="docutils literal">entry_points</tt> (see <a class="reference external" href="https://go.chriswarrick.com/entry_points">https://go.chriswarrick.com/entry_points</a>).</li>
<li>
<tt class="docutils literal">tests/</tt> containing some <em>Is My Python Sane?</em>-style tests (using <tt class="docutils literal">pytest</tt>)</li>
<li>An automated global update script (<tt class="docutils literal"><span class="pre">.pypt/PYPT-UPDATE</span></tt>)</li>
<li>Entry points configuration ready to be uncommented (and a matching
<tt class="docutils literal">__main__.py</tt> file)</li>
<li>Add-ons for Qt users (in <tt class="docutils literal"><span class="pre">pypt-extras/Qt</span></tt>)</li>
<li>A sample hook for AUR updates (in <tt class="docutils literal"><span class="pre">pypt-extras/AUR</span></tt>)</li>
<li>PKGBUILDs for the Arch Linux User Repository (AUR)</li>
<li>A state-of-the-art <tt class="docutils literal">release</tt> script, the operations of which are:<ul>
<li>querying the user for version number, commit message and changes</li>
<li>updating <tt class="docutils literal">/docs/CHANGELOG.rst</tt>
</li>
<li>bumping the version number in all the files, changing dates where necessary</li>
<li>copying over <tt class="docutils literal">/docs/README.rst</tt>,  <tt class="docutils literal">/docs/CHANGELOG.rst</tt> and <tt class="docutils literal">/docs/CONTRIBUTING.rst</tt> to <tt class="docutils literal">/</tt>
</li>
<li>locale generation (via the <tt class="docutils literal">.pypt/localegen</tt> script)</li>
<li>running <tt class="docutils literal">import $PROJECTLC</tt> and the test suite</li>
<li>uploading a source distribution and a wheel to PyPI</li>
<li>Making a Git commit and tagging the release</li>
<li>creating a GitHub Releases entry</li>
<li>updating the AUR packages (by using hooks)</li>
</ul>
</li>
</ul>
<div style="text-align: center;">
<a href="https://github.com/Kwpolska/python-project-template" class="btn btn-lg btn-info"><i class="fa fa-github"></i> Check it out on GitHub</a>
</div>
</div>
</div>
    </article>
</div>
    <aside class="postpromonav"><div class="panel panel-primary guide-footer">
  <div class="panel-heading"><h3 class="panel-title">That’s all!</h3></div>
  <div class="panel-body">
    Hopefully, the guide worked for you and your Python project is now well-structured and automated. If so, great! Otherwise, make sure you did everything as stated in this guide. If you are still stuck, ask for help in the comments.
  </div>
  <div class="panel-footer"><a href="/guides/">Check out my other guides!</a></div>
</div>
    <nav><ul class="pager hidden-print">
<li class="previous">
                <a href="/blog/2017/04/07/csv-is-not-a-standard/" rel="prev" title="CSV is not a standard">Previous post</a>
            </li>
            <li class="next">
                <a href="/blog/2017/06/08/apples-new-pricing-strategy-dont-buy-the-12-macbook/" rel="next" title="Apple’s new pricing strategy: don't buy the 12″ MacBook">Next post</a>
            </li>
        </ul></nav></aside><section class="comments"><h2>Comments</h2>
                        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="kwpolska",
            disqus_url="https://chriswarrick.com/blog/2017/04/09/python-project-template-structure-and-automation/",
        disqus_title="Structuring and automating a Python project with the Python Project Template",
        disqus_identifier="cache/posts/2017/04/09/python-project-template-structure-and-automation.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section><script>var disqus_shortname="kwpolska";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer class="site-footer"><p><a href="/cookies/">this site uses
cookies.</a><br>by using this site, you agree to our cookie policy.</p>
<p>
powered by <strong><a href="https://getnikola.com/">Nikola</a></strong>, <a href="http://nginx.org/">nginx</a> and <a href="https://www.digitalocean.com/?refcode=7983689b2ecc">DigitalOcean</a><br>
copyright © 2009–2017 <a href="/contact/">Chris Warrick</a><br><a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC
BY-NC-SA</a>, unless stated otherwise</p>
            
        </footer>
</div>


            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script><script src="/assets/js/all.js"></script><script>jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-11937989-1', 'chriswarrick.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>
</body>
</html>
<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Python Apps the Right Way: entry points and scripts | Chris Warrick</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.10.0/baguetteBox.min.css" integrity="sha256-FqCzNnnyXl5HxHMdb+RQ/RV/X7fqfPcQYy+G2gFL3Xk=" crossorigin="anonymous">
<link href="/assets/css/all.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=EB+Garamond:400,400i,700%7CSource+Sans+Pro&amp;subset=latin-ext" rel="stylesheet">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
<meta name="theme-color" content="#00aadd">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="/rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (pl)" href="/pl/rss.xml">
<link rel="canonical" href="https://chriswarrick.com/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/">
<link rel="icon" type="image/x-icon" href="/favicon.ico" sizes="16x16 32x32 48x48 64x64 128x128 256x256">
<link rel="icon" type="image/png" href="/assets/img/logo512.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<!--[if lt IE 9]><script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]--><meta name="author" content="Chris Warrick">
<link rel="prev" href="/blog/2014/08/26/speeker/" title="Speeker — my little Android app" type="text/html">
<link rel="next" href="/blog/2014/10/13/revamping-my-projects-page-with-nikola/" title="Revamping My Projects Page with Nikola" type="text/html">
<meta property="og:site_name" content="Chris Warrick">
<meta property="og:title" content="Python Apps the Right Way: entry points and scripts">
<meta property="og:url" content="https://chriswarrick.com/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/">
<meta property="og:description" content="There are multiple ways to write an app in Python.  However, not all of them
provide your users with the best experience.
One of the problems some people encounter is writing launch scripts.  The
best">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2014-09-15T18:00:00+02:00">
<meta property="article:tag" content="best practices">
<meta property="article:tag" content="devel">
<meta property="article:tag" content="guide">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@Kwpolska">
<link rel="alternate" hreflang="pl" href="/pl/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md navbar-kw bg-dark static-top mb-4"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="https://chriswarrick.com/">
            <img src="/assets/img/logo.png" srcset="/assets/img/logo2x.png 2x" alt="Chris Warrick" id="logo"><span id="blog-title">Chris Warrick</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto">
<li class="nav-item">
<a href="/blog/" class="nav-link">Archives</a>
                </li>
<li class="nav-item">
<a href="/blog/tags/" class="nav-link">Tags</a>
                </li>
<li class="nav-item">
<a href="/contact/" class="nav-link">Contact</a>
                </li>
<li class="nav-item">
<a href="/brand/" class="nav-link">Brand</a>
                </li>
<li class="nav-item">
<a href="/kwbot/" class="nav-link">KwBot</a>
                </li>
<li class="nav-item">
<a href="/projects/" class="nav-link">Projects</a>
                </li>
<li class="nav-item">
<a href="/guides/" class="nav-link">Guides</a>
                </li>
<li class="nav-item">
<a href="/search/" class="nav-link">Search</a>

                
            </li>
</ul>
<ul class="navbar-nav navbar-right">
<li>            </li>
<li class="nav-item"><a href="https://chriswarrick.com/pl/" rel="alternate" hreflang="pl" class="nav-link">Polski</a></li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
<article class="post-text h-entry hentry postpage postbox" itemscope="itemscope" itemtype="http://schema.org/Article"><header class="page-header"><h1 class="p-name entry-title" itemprop="headline name">
    <a href="/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/" class="u-url">Python Apps the Right Way: entry points and scripts</a>
    </h1>

    <div class="metadata">
<a href="/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/" rel="bookmark" class="u-published"><time class="published dt-published" datetime="2014-09-15T18:00:00+02:00" itemprop="datePublished" title="2014-09-15 18:00">2014-09-15 18:00</time><time class="updated dt-updated" datetime="2017-08-03T18:20:00+02:00" title="Updated 2017-08-03 18:20"> (2017-08-03 18:20)</time></a>
        <ul itemprop="keywords" class="tags post-bubbles list-inline">
<li class="category-bubble"><a href="/blog/tags/cat_python/" style="background-color: #ffd43b">Python</a></li>
           <li><a class="tag p-category" href="/blog/tags/best-practices/" rel="tag">best practices</a></li>
           <li><a class="tag p-category" href="/blog/tags/devel/" rel="tag">devel</a></li>
           <li><a class="tag p-category" href="/blog/tags/guide/" rel="tag">guide</a></li>
           <li><a class="tag p-category" href="/blog/tags/python/" rel="tag">Python</a></li>
        </ul>
<span class="shortlink-bubble"><a href="https://go.chriswarrick.com/entry_points" title="Short link to this article (go.chriswarrick.com/entry_points)"><i class="fa fa-link"></i> entry_points</a></span>        
<p class="guide-header">A <a href="/guides/">guide</a> about <span class="guide-topic">Python</span> for <span class="guide-platform">any platform</span></p>    </div>
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div class="lead"><div>
<p>There are multiple ways to write an app in Python.  However, not all of them
provide your users with the best experience.</p>
<p>One of the problems some people encounter is <em>writing launch scripts</em>.  The
best way to handle this is the <em>Entry Points</em> mechanism of Setuptools, and a
<tt class="docutils literal">__main__.py</tt> file.  It’s quite easy to implement.  If you’re interested,
read on to learn more!</p>
</div></div>
<div class="section" id="requirements-and-desired-results">
<h2>Requirements and Desired Results<a href="#requirements-and-desired-results" class="headerlink" title="Permalink to this heading">¶</a></h2>
<p>You will need:</p>
<ul>
<li>
<p class="first">a Python project</p>
</li>
<li>
<p class="first">a setup.py file using <a class="reference external" href="https://pypi.python.org/pypi/setuptools">setuptools</a></p>
</li>
<li>
<p class="first">the following directory structure:</p>
<ul class="list-nobullets">
<li>
    <a href="/listings/entry_points_project/"><i class="fa fa-folder-open"></i>
    entry_points_project/</a>
    </li>
<li>
        <ul class="list-nobullets">
<li>
        <a href="/listings/entry_points_project/my_project/"><i class="fa fa-folder-open"></i> my_project/</a>
            </li>
<li>
            <ul class="list-nobullets">
<li>
                <a href="/listings/entry_points_project/my_project/__init__.py.html"><i class="fa fa-file"></i>
                __init__.py</a>
                </li>
                <li>
                <a href="/listings/entry_points_project/my_project/__main__.py.html"><i class="fa fa-file"></i>
                __main__.py</a>
                </li>
            </ul>
</li>
        <li>
        <a href="/listings/entry_points_project/setup.py.html"><i class="fa fa-file"></i> setup.py</a>
        </li>
        </ul>
</li>
    </ul>
</li>
</ul>
<p>(<tt class="docutils literal">entry_points_project</tt> is also where the README and other auxiliary files
go, while <tt class="docutils literal">my_project</tt> contains all the Python code.)</p>
<p>When you’re done, you will have a project that can be executed by:</p>
<ul class="simple">
<li><tt class="docutils literal">python <span class="pre">-m</span> my_project</tt></li>
<li><tt class="docutils literal">my_project</tt></li>
</ul>
<p>Provided that you have your Python directory and its <tt class="docutils literal">Scripts\</tt> subdirectory on
the %PATH%, this will <strong>also work in Windows</strong>.</p>
 <div class="panel panel-info">
   <div class="panel-heading">
     <h4 class="panel-title" id="looking-for-a-project-template">Looking for a project template?<a href="#looking-for-a-project-template" class="headerlink" title="Permalink to this heading">¶</a></h4>
   </div>
   <div class="panel-body">
    If you want to create a well-structured project with release automation and
some other goodies, check out my <a href="https://github.com/Kwpolska/python-project-template" style="font-weight: bold;">Python Project Template</a>.
   </div>
 </div>
</div>
<div class="section" id="step-1-create-a-main-py-file">
<h2>Step 1: create a <tt class="docutils literal">__main__.py</tt> file<a href="#step-1-create-a-main-py-file" class="headerlink" title="Permalink to this heading">¶</a></h2>
<p>In order to implement the first desired result, you need to create a
<tt class="docutils literal">__main__.py</tt> file in your package.  This file needs to contain a <tt class="docutils literal">main()</tt>
function that takes no arguments, and also a special passage to determine code
to run:</p>
<p><a class="reference external" href="/listings/entry_points_project/my_project/__main__.py.html">entry_points_project/my_project/__main__.py</a>  <a class="reference external" href="/listings/entry_points_project/my_project/__main__.py">(Source)</a></p>
<pre class="code python"><a name="rest_code_c617aa085d494125b436691b24f4261a-1"></a><span class="kn">import</span> <span class="nn">sys</span>
<a name="rest_code_c617aa085d494125b436691b24f4261a-2"></a>
<a name="rest_code_c617aa085d494125b436691b24f4261a-3"></a>
<a name="rest_code_c617aa085d494125b436691b24f4261a-4"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
<a name="rest_code_c617aa085d494125b436691b24f4261a-5"></a>    <span class="sd">"""The main routine."""</span>
<a name="rest_code_c617aa085d494125b436691b24f4261a-6"></a>    <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
<a name="rest_code_c617aa085d494125b436691b24f4261a-7"></a>        <span class="n">args</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<a name="rest_code_c617aa085d494125b436691b24f4261a-8"></a>
<a name="rest_code_c617aa085d494125b436691b24f4261a-9"></a>    <span class="k">print</span><span class="p">(</span><span class="s2">"This is the main routine."</span><span class="p">)</span>
<a name="rest_code_c617aa085d494125b436691b24f4261a-10"></a>    <span class="k">print</span><span class="p">(</span><span class="s2">"It should do something interesting."</span><span class="p">)</span>
<a name="rest_code_c617aa085d494125b436691b24f4261a-11"></a>
<a name="rest_code_c617aa085d494125b436691b24f4261a-12"></a>    <span class="c1"># Do argument parsing here (eg. with argparse) and anything else</span>
<a name="rest_code_c617aa085d494125b436691b24f4261a-13"></a>    <span class="c1"># you want your project to do.</span>
<a name="rest_code_c617aa085d494125b436691b24f4261a-14"></a>
<a name="rest_code_c617aa085d494125b436691b24f4261a-15"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
<a name="rest_code_c617aa085d494125b436691b24f4261a-16"></a>    <span class="n">main</span><span class="p">()</span>
</pre>
<ol class="arabic simple">
<li>The <tt class="docutils literal">if __name__ == "__main__":</tt> idiom, as <a class="reference external" href="https://docs.python.org/3/library/__main__.html">documented here</a>, is used to check whether
this is executed as the top-level file, or if it has been imported by someone
else (in this case, executing the <tt class="docutils literal">main()</tt> function is not always intended).</li>
<li>The <tt class="docutils literal">main()</tt> function must not take any arguments, because that’s how
<tt class="docutils literal">entry_points</tt> executes things.</li>
</ol>
</div>
<div class="section" id="step-2-adjust-setup-py-accordingly">
<h2>Step 2: adjust <tt class="docutils literal">setup.py</tt> accordingly<a href="#step-2-adjust-setup-py-accordingly" class="headerlink" title="Permalink to this heading">¶</a></h2>
<p>This is the real deal: create the entry points in your <tt class="docutils literal">setup.py</tt> file.</p>
<p><a class="reference external" href="/listings/entry_points_project/setup.py.html">entry_points_project/setup.py</a>  <a class="reference external" href="/listings/entry_points_project/setup.py">(Source)</a></p>
<pre class="code python"><a name="rest_code_1dc6625acc1d4de3b44b2710915b1e3c-1"></a><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>
<a name="rest_code_1dc6625acc1d4de3b44b2710915b1e3c-2"></a>
<a name="rest_code_1dc6625acc1d4de3b44b2710915b1e3c-3"></a><span class="n">setup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'my_project'</span><span class="p">,</span>
<a name="rest_code_1dc6625acc1d4de3b44b2710915b1e3c-4"></a>      <span class="n">version</span><span class="o">=</span><span class="s1">'0.1.0'</span><span class="p">,</span>
<a name="rest_code_1dc6625acc1d4de3b44b2710915b1e3c-5"></a>      <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s1">'my_project'</span><span class="p">],</span>
<a name="rest_code_1dc6625acc1d4de3b44b2710915b1e3c-6"></a>      <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
<a name="rest_code_1dc6625acc1d4de3b44b2710915b1e3c-7"></a>          <span class="s1">'console_scripts'</span><span class="p">:</span> <span class="p">[</span>
<a name="rest_code_1dc6625acc1d4de3b44b2710915b1e3c-8"></a>              <span class="s1">'my_project = my_project.__main__:main'</span>
<a name="rest_code_1dc6625acc1d4de3b44b2710915b1e3c-9"></a>          <span class="p">]</span>
<a name="rest_code_1dc6625acc1d4de3b44b2710915b1e3c-10"></a>      <span class="p">},</span>
<a name="rest_code_1dc6625acc1d4de3b44b2710915b1e3c-11"></a>      <span class="p">)</span>
</pre>
<ol class="arabic simple">
<li>You must use setuptools, otherwise this won’t work.</li>
<li>The most important piece of code is the <tt class="docutils literal">entry_points</tt> declaration
(unsurprisingly).</li>
<li>The declaration reads</li>
</ol>
<pre class="code text"><a name="rest_code_cc16e57bb5124b08948746ff9707810c-1"></a>"name_of_executable = module.with:function_to_execute"
</pre>
<ol class="arabic simple" start="4">
<li>If you are developing a GUI application (in Tkinter, PyQt/PySide,
wxPython, PyGTK, PyGame…), you should change the declaration to
<tt class="docutils literal">gui_scripts</tt>.  On *nix, this makes no difference, but on Windows, it
means that running your script by opening the created <tt class="docutils literal">.exe</tt> files does
not show a console window. Note that stdout/stderr do not work in that mode
under Windows, which can lead to spurious application crashes.  (GUI-only
processes cannot use stdout/stderr because they don’t have a console
attached)</li>
<li>You can create <strong>multiple scripts</strong> this way.  You can also have multiple
<tt class="docutils literal">console_scripts</tt> <em>and</em> <tt class="docutils literal">gui_scripts</tt> in one setup file.</li>
</ol>
<p class="text-muted">All <a class="reference external" href="/listings/entry_points_project/">code samples</a> are freely reusable, but if you mention where you got them from, it’d be really nice.</p>
</div>
</div>
    </article>
</div>
    <aside class="postpromonav"><div class="card guide-footer">
  <div class="card-header bg-primary border-primary"><h3>That’s all!</h3></div>
  <div class="card-body">
    Hopefully, the guide worked for you and your Python apps have good launch scripts for all platforms. If so, great! Otherwise, make sure you did everything as stated in this guide. If you are still stuck, ask for help in the comments.
  </div>
  <div class="card-footer"><a href="/guides/">Check out my other guides!</a></div>
</div>
    <nav><ul class="pager hidden-print">
<li class="previous">
                <a href="/blog/2014/08/26/speeker/" rel="prev" title="Speeker — my little Android app">Previous post</a>
            </li>
            <li class="next">
                <a href="/blog/2014/10/13/revamping-my-projects-page-with-nikola/" rel="next" title="Revamping My Projects Page with Nikola">Next post</a>
            </li>
        </ul></nav></aside><section class="comments"><h2>Comments</h2>
                        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="kwpolska",
            disqus_url="https://chriswarrick.com/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/",
        disqus_title="Python Apps the Right Way: entry points and scripts",
        disqus_identifier="cache/posts/2014/09/15/entry_points.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section><script>var disqus_shortname="kwpolska";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><!--End of body content--><footer id="footer"><p><a href="/cookies/">this site uses
cookies.</a><br>by using this site, you agree to our cookie policy.</p>
<p>
powered by <strong><a href="https://getnikola.com/">Nikola</a></strong>, <a href="http://nginx.org/">nginx</a> and <a href="https://www.digitalocean.com/?refcode=7983689b2ecc">DigitalOcean</a><br>
copyright © 2009–2018 <a href="/contact/">Chris Warrick</a><br><a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC
BY-NC-SA</a>, unless stated otherwise</p>
            
        </footer>
</div>


    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha256-98vAGjEDGN79TjHkYWVD4s87rvWkdWLHPs5MC3FvFX4=" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.10.0/baguetteBox.min.js" integrity="sha256-lQrWH6UPtNlJURtEYCgKDqLyBscHa/uF/nFle9bx3tI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.1/moment-with-locales.min.js" integrity="sha256-ZykW30UBCXWkPGsVyVPdJlUrce9/PawgYCEzinA4pnU=" crossorigin="anonymous"></script><script src="/assets/js/all.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-11937989-1', 'chriswarrick.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>
</body>
</html>
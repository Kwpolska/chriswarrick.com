<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="pl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Python Apps the Right Way: entry points and scripts | Chris Warrick</title>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
<link href="/assets/css/all.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="/rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (pl)" href="/pl/rss.xml">
<link rel="canonical" href="https://chriswarrick.com/pl/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/">
<link rel="icon" type="image/x-icon" href="/favicon.ico" sizes="16x16 32x32 48x48 64x64 128x128 256x256">
<link rel="icon" type="image/png" href="/assets/img/logo512.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<!--[if lt IE 9]><script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]--><meta name="application-name" content="Chris Warrick">
<meta name="msapplication-starturl" content="https://chriswarrick.com/">
<meta name="msapplication-navbutton-color" content="#00aadd">
<meta name="theme-color" content="#00aadd">
<meta name="generator" content="Nikola (getnikola.com)">
<meta name="author" content="Chris Warrick">
<link rel="prev" href="/pl/blog/2014/08/26/speeker/" title="Speeker — moja mała aplikacja na Androida" type="text/html">
<link rel="next" href="/pl/blog/2014/10/13/revamping-my-projects-page-with-nikola/" title="Revamping My Projects Page with Nikola" type="text/html">
<meta property="og:site_name" content="Chris Warrick">
<meta property="og:title" content="Python Apps the Right Way: entry points and scripts">
<meta property="og:url" content="https://chriswarrick.com/pl/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/">
<meta property="og:description" content="There are multiple ways to write an app in Python.  However, not all of them
provide your users with the best experience.
One of the problems some people encounter is writing launch scripts.  The
best">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2014-09-15T18:00:00+02:00">
<meta property="article:tag" content="best practices">
<meta property="article:tag" content="devel">
<meta property="article:tag" content="guide">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@Kwpolska">
<link rel="alternate" hreflang="en" href="/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Przejdź do treści</a>

<!-- Menubar -->

<nav class="navbar navbar-kw navbar-static-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-kw-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://chriswarrick.com/pl/">
            <img src="/assets/img/logo.png" srcset="/assets/img/logo2x.png 2x" alt="Chris Warrick" id="logo"><span id="blog-title">Chris Warrick</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-kw-collapse">
            <ul class="nav navbar-nav">
<li>
<a href="/pl/blog/">Archiwum</a>
                </li>
<li>
<a href="/pl/blog/tags/">Tagi</a>
                </li>
<li>
<a href="/pl/contact/">Kontakt</a>
                </li>
<li>
<a href="/pl/brand/">Brand</a>
                </li>
<li>
<a href="/pl/kwbot/">KwBot</a>
                </li>
<li>
<a href="/projects/">Projekty</a>
                </li>
<li>
<a href="/guides/">Przewodniki</a>
                </li>
<li>
<a href="/pl/search/">Szukaj</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>            </li>
<li><a href="https://chriswarrick.com/" rel="alternate" hreflang="en">English</a></li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
        <div id="cookiecontainer"></div>
            
<article class="post- h-entry hentry postpage postbox" itemscope="itemscope" itemtype="http://schema.org/Article"><header class="page-header"><h1 class="p-name entry-title" itemprop="headline name">
    <a href="/pl/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/" class="u-url">Python Apps the Right Way: entry points and scripts</a>
    </h1>

    <div class="metadata">
<a href="/pl/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/" rel="bookmark" class="u-published"><time class="published dt-published" datetime="2014-09-15T18:00:00+02:00" itemprop="datePublished" title="2014-09-15 18:00">2014-09-15 18:00</time><time class="updated dt-updated" datetime="2017-04-12T20:35:00+02:00" title="Updated 2017-04-12 20:35"> (2017-04-12 20:35)</time></a>
        <ul itemprop="keywords" class="tags">
<li class="section-bubble" style="background-color: #ffd43b"><a href="/pl/python/">Python</a></li>
           <li><a class="tag p-category" href="/pl/blog/tags/best-practices/" rel="tag">best practices</a></li>
           <li><a class="tag p-category" href="/pl/blog/tags/devel/" rel="tag">devel</a></li>
           <li><a class="tag p-category" href="/pl/blog/tags/guide/" rel="tag">guide</a></li>
           <li><a class="tag p-category" href="/pl/blog/tags/python/" rel="tag">Python</a></li>
        
<li class="shortlink-bubble"><a href="https://go.chriswarrick.com/entry_points" title="Short link to this article (go.chriswarrick.com/entry_points)"><i class="fa fa-link"></i> entry_points</a></li>        </ul>
<p class="guide-header">A <a href="/guides/">guide</a> about <span class="guide-topic">Python</span> for <span class="guide-platform">any platform</span></p>    </div>
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div class="lead"><div>
<p>There are multiple ways to write an app in Python.  However, not all of them
provide your users with the best experience.</p>
<p>One of the problems some people encounter is <em>writing launch scripts</em>.  The
best way to handle this is the <em>Entry Points</em> mechanism of Setuptools, and a
<tt class="docutils literal">__main__.py</tt> file.  It’s quite easy to implement.  If you’re interested,
read on to learn more!</p>
</div></div>
<div class="section" id="requirements-and-desired-results">
<h2>Requirements and Desired Results<a href="#requirements-and-desired-results" class="headerlink" title="Permalink to this heading">¶</a></h2>
<p>You will need:</p>
<ul>
<li>
<p class="first">a Python project</p>
</li>
<li>
<p class="first">a setup.py file using <a class="reference external" href="https://pypi.python.org/pypi/setuptools">setuptools</a></p>
</li>
<li>
<p class="first">the following directory structure:</p>
<ul class="list-nobullets">
<li>
    <a href="/listings/entry_points_project/"><i class="fa fa-folder-open"></i>
    entry_points_project/</a>
    </li>
<li>
        <ul class="list-nobullets">
<li>
        <a href="/listings/entry_points_project/my_project/"><i class="fa fa-folder-open"></i> my_project/</a>
            </li>
<li>
            <ul class="list-nobullets">
<li>
                <a href="/listings/entry_points_project/my_project/__init__.py.html"><i class="fa fa-file"></i>
                __init__.py</a>
                </li>
                <li>
                <a href="/listings/entry_points_project/my_project/__main__.py.html"><i class="fa fa-file"></i>
                __main__.py</a>
                </li>
            </ul>
</li>
        <li>
        <a href="/listings/entry_points_project/setup.py.html"><i class="fa fa-file"></i> setup.py</a>
        </li>
        </ul>
</li>
    </ul>
</li>
</ul>
<p>(<tt class="docutils literal">entry_points_project</tt> is also where the README and other auxiliary files
go, while <tt class="docutils literal">my_project</tt> contains all the Python code.)</p>
<p>When you’re done, you will have a project that can be executed by:</p>
<ul class="simple">
<li><tt class="docutils literal">python <span class="pre">-m</span> my_project</tt></li>
<li><tt class="docutils literal">my_project</tt></li>
</ul>
<p>Provided that you have your Python directory and its <tt class="docutils literal">Scripts\</tt> subdirectory on
the %PATH%, this will <strong>also work in Windows</strong>.</p>
 <div class="panel panel-info">
   <div class="panel-heading">
     <h4 class="panel-title" id="looking-for-a-project-template">Looking for a project template?<a href="#looking-for-a-project-template" class="headerlink" title="Permalink to this heading">¶</a></h4>
   </div>
   <div class="panel-body">
    If you want to create a well-structured project with release automation and
some other goodies, check out my <a href="https://github.com/Kwpolska/python-project-template" style="font-weight: bold;">Python Project Template</a>.
   </div>
 </div>
</div>
<div class="section" id="step-1-create-a-main-py-file">
<h2>Step 1: create a <tt class="docutils literal">__main__.py</tt> file<a href="#step-1-create-a-main-py-file" class="headerlink" title="Permalink to this heading">¶</a></h2>
<p>In order to implement the first desired result, you need to create a
<tt class="docutils literal">__main__.py</tt> file in your package.  This file needs to contain a <tt class="docutils literal">main()</tt>
function that takes no arguments, and also a special passage to determine code
to run:</p>
<p><a class="reference external" href="/listings/entry_points_project/my_project/__main__.py.html">entry_points_project/my_project/__main__.py</a>  <a class="reference external" href="/listings/entry_points_project/my_project/__main__.py">(Source)</a></p>
<pre class="code python"><a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-1"></a><span class="kn">import</span> <span class="nn">sys</span>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-2"></a>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-3"></a>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-4"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-5"></a>    <span class="sd">"""The main routine."""</span>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-6"></a>    <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-7"></a>        <span class="n">args</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-8"></a>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-9"></a>    <span class="k">print</span><span class="p">(</span><span class="s2">"This is the main routine."</span><span class="p">)</span>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-10"></a>    <span class="k">print</span><span class="p">(</span><span class="s2">"It should do something interesting."</span><span class="p">)</span>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-11"></a>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-12"></a>    <span class="c1"># Do argument parsing here (eg. with argparse) and anything else</span>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-13"></a>    <span class="c1"># you want your project to do.</span>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-14"></a>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-15"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
<a name="rest_code_9e3e96d22ebc4145811e15942dec8dd5-16"></a>    <span class="n">main</span><span class="p">()</span>
</pre>
<ol class="arabic simple">
<li>The <tt class="docutils literal">if __name__ == "__main__":</tt> idiom, as <a class="reference external" href="https://docs.python.org/3/library/__main__.html">documented here</a>, is used to check whether
this is executed as the top-level file, or if it has been imported by someone
else (in this case, executing the <tt class="docutils literal">main()</tt> function is not always intended).</li>
<li>The <tt class="docutils literal">main()</tt> function must not take any arguments, because that’s how
<tt class="docutils literal">entry_points</tt> executes things.</li>
</ol>
</div>
<div class="section" id="step-2-adjust-setup-py-accordingly">
<h2>Step 2: adjust <tt class="docutils literal">setup.py</tt> accordingly<a href="#step-2-adjust-setup-py-accordingly" class="headerlink" title="Permalink to this heading">¶</a></h2>
<p>This is the real deal: create the entry points in your <tt class="docutils literal">setup.py</tt> file.</p>
<p><a class="reference external" href="/listings/entry_points_project/setup.py.html">entry_points_project/setup.py</a>  <a class="reference external" href="/listings/entry_points_project/setup.py">(Source)</a></p>
<pre class="code python"><a name="rest_code_8c30fdbba59b4e5fad22e326b6dc7db1-1"></a><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>
<a name="rest_code_8c30fdbba59b4e5fad22e326b6dc7db1-2"></a>
<a name="rest_code_8c30fdbba59b4e5fad22e326b6dc7db1-3"></a><span class="n">setup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">'my_project'</span><span class="p">,</span>
<a name="rest_code_8c30fdbba59b4e5fad22e326b6dc7db1-4"></a>      <span class="n">version</span><span class="o">=</span><span class="s1">'0.1.0'</span><span class="p">,</span>
<a name="rest_code_8c30fdbba59b4e5fad22e326b6dc7db1-5"></a>      <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s1">'my_project'</span><span class="p">],</span>
<a name="rest_code_8c30fdbba59b4e5fad22e326b6dc7db1-6"></a>      <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
<a name="rest_code_8c30fdbba59b4e5fad22e326b6dc7db1-7"></a>          <span class="s1">'console_scripts'</span><span class="p">:</span> <span class="p">[</span>
<a name="rest_code_8c30fdbba59b4e5fad22e326b6dc7db1-8"></a>              <span class="s1">'my_project = my_project.__main__:main'</span>
<a name="rest_code_8c30fdbba59b4e5fad22e326b6dc7db1-9"></a>          <span class="p">]</span>
<a name="rest_code_8c30fdbba59b4e5fad22e326b6dc7db1-10"></a>      <span class="p">},</span>
<a name="rest_code_8c30fdbba59b4e5fad22e326b6dc7db1-11"></a>      <span class="p">)</span>
</pre>
<ol class="arabic simple">
<li>You must use setuptools, otherwise this won’t work.</li>
<li>The most important piece of code is the <tt class="docutils literal">entry_points</tt> declaration
(unsurprisingly).</li>
<li>The declaration reads</li>
</ol>
<pre class="code text"><a name="rest_code_5eeb386228434137bc785ff4ab02b341-1"></a>"name_of_executable = module.with:function_to_execute"
</pre>
<ol class="arabic simple" start="4">
<li>If you are developing a GUI application (in Tkinter, PyQt/PySide,
WxPython, PyGTK, PyGame…), you should change the declaration to
<tt class="docutils literal">gui_scripts</tt>.</li>
<li>You can create <strong>multiple scripts</strong> this way.  You can also have multiple
<tt class="docutils literal">console_scripts</tt> <em>and</em> <tt class="docutils literal">gui_scripts</tt> in one setup file.</li>
</ol>
<p class="text-muted">All <a class="reference external" href="/listings/entry_points_project/">code samples</a> are freely reusable, but if you mention where you got them from, it’d be really nice.</p>
</div>
</div>
    </article>
</div>
    <aside class="postpromonav"><div class="panel panel-primary guide-footer">
  <div class="panel-heading"><h3 class="panel-title">That’s all!</h3></div>
  <div class="panel-body">
    Hopefully, the guide worked for you and your Python apps have good launch scripts for all platforms. If so, great! Otherwise, make sure you did everything as stated in this guide. If you are still stuck, ask for help in the comments.
  </div>
  <div class="panel-footer"><a href="/guides/">Check out my other guides!</a></div>
</div>
    <nav><ul class="pager hidden-print">
<li class="previous">
                <a href="/pl/blog/2014/08/26/speeker/" rel="prev" title="Speeker — moja mała aplikacja na Androida">Poprzedni post</a>
            </li>
            <li class="next">
                <a href="/pl/blog/2014/10/13/revamping-my-projects-page-with-nikola/" rel="next" title="Revamping My Projects Page with Nikola">Następny post</a>
            </li>
        </ul></nav></aside><section class="comments"><h2>Komentarze</h2>
                        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="kwpolska",
            disqus_url="https://chriswarrick.com/pl/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/",
        disqus_title="Python Apps the Right Way: entry points and scripts",
        disqus_identifier="cache/posts/2014/09/15/entry_points.html",
        disqus_config = function () {
            this.language = "pl";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section><script>var disqus_shortname="kwpolska";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer class="site-footer"><p><a href="/pl/cookies/">ta strona używa ciasteczek.</a><br>
korzystając z tej strony, akceptujesz naszą politykę ciasteczek.
</p>
<p>
powered by <strong><a href="https://getnikola.com/">Nikola</a></strong>, <a href="http://nginx.org/">nginx</a> and <a href="https://www.digitalocean.com/?refcode=7983689b2ecc">DigitalOcean</a><br>
copyright © 2009–2017 <a href="/pl/contact/">Chris Warrick</a><br><a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC
BY-NC-SA</a>, unless stated otherwise</p>
            
        </footer>
</div>


            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script><script src="/assets/js/all.js"></script><script src="/assets/js/colorbox-i18n/jquery.colorbox-pl.js"></script><script>jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><script>
    moment.locale("pl");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-11937989-1', 'chriswarrick.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>
</body>
</html>
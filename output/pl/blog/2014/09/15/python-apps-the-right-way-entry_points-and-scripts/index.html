<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="pl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Python Apps the Right Way: entry points and scripts | Chris Warrick</title>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
<link href="../../../../../../assets/css/all.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS (en)" href="../../../../../../rss.xml">
<link rel="alternate" type="application/rss+xml" title="RSS (pl)" href="../../../../../rss.xml">
<link rel="canonical" href="https://chriswarrick.com/pl/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/">
<link rel="icon" href="../../../../../../favicon.ico" sizes="16x16">
<!--[if lt IE 9]><script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]--><meta name="application-name" content="Chris Warrick">
<meta name="msapplication-starturl" content="https://chriswarrick.com/">
<meta name="msapplication-navbutton-color" content="#00aadd">
<meta name="theme-color" content="#00aadd">
<meta name="author" content="Chris Warrick">
<link rel="prev" href="../../../08/26/speeker/" title="Speeker — moja mała aplikacja na Androida" type="text/html">
<link rel="next" href="../../../10/13/revamping-my-projects-page-with-nikola/" title="Revamping My Projects Page with Nikola" type="text/html">
<meta property="og:site_name" content="Chris Warrick">
<meta property="og:title" content="Python Apps the Right Way: entry points and scripts">
<meta property="og:url" content="https://chriswarrick.com/pl/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/">
<meta property="og:description" content="There are multiple ways to write an app in Python.  However, not all of them
provide your users with the best experience.
One of the problems some people encounter is writing launch scripts.  The
best">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2014-09-15T18:00:00+02:00">
<meta property="article:tag" content="best practices">
<meta property="article:tag" content="devel">
<meta property="article:tag" content="howto">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@Kwpolska">
<link rel="alternate" hreflang="en" href="../../../../../../blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Przejdź do treści</a>

<!-- Menubar -->

<nav class="navbar navbar-kw navbar-static-top" role="navigation"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-kw-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://chriswarrick.com/pl/">
                <img src="../../../../../../assets/img/logo.png" alt="Chris Warrick" id="logo"><span id="blog-title">Chris Warrick</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-kw-collapse">
            <ul class="nav navbar-nav">
<li>
<a href="../../../../">Archiwum</a>
                </li>
<li>
<a href="../../../../tags/">Tagi</a>
                </li>
<li>
<a href="../../../../../contact/">Kontakt</a>
                </li>
<li>
<a href="../../../../../brand/">Brand</a>
                </li>
<li>
<a href="../../../../../kwbot/">KwBot</a>
                </li>
<li>
<a href="../../../../../../projects/">Projekty</a>
                </li>
<li>
<a href="../../../../../search/">Szukaj</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>            </li>
<li><a href="https://chriswarrick.com/" rel="alternate" hreflang="en">English</a></li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
        <div id="cookiecontainer"></div>
            
<article class="post- h-entry hentry postpage postbox" itemscope="itemscope" itemtype="http://schema.org/Article"><header class="page-header"><h1 class="p-name entry-title" itemprop="headline name">
    <a href="." class="u-url">Python Apps the Right Way: entry points and&nbsp;scripts</a>
    </h1>

    <div class="metadata">
<a href="." rel="bookmark" class="u-published"><time class="published dt-published" datetime="2014-09-15T18:00:00+02:00" itemprop="datePublished" title="2014-09-15 18:00">2014-09-15 18:00</time></a>                <ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../../tags/best-practices/" rel="tag">best&nbsp;practices</a></li>
           <li><a class="tag p-category" href="../../../../tags/devel/" rel="tag">devel</a></li>
           <li><a class="tag p-category" href="../../../../tags/howto/" rel="tag">howto</a></li>
           <li><a class="tag p-category" href="../../../../tags/python/" rel="tag">Python</a></li>
        
        </ul>
</div>
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div class="lead"><div>
<p>There are multiple ways to write an app in Python.  However, not all of them
provide your users with the best&nbsp;experience.</p>
<p>One of the problems some people encounter is <em>writing launch scripts</em>.  The
best way to handle this is the <em>Entry Points</em> mechanism of Setuptools, and a
<tt class="docutils literal">__main__.py</tt> file.  It’s quite easy to implement.  If you’re interested,
read on to learn&nbsp;more!</p>
</div></div>
<div class="section" id="requirements-and-desired-results">
<h2>Requirements and Desired&nbsp;Results</h2>
<p>You will&nbsp;need:</p>
<ul>
<li>
<p class="first">a Python&nbsp;project</p>
</li>
<li>
<p class="first">a setup.py file using <a class="reference external" href="https://pypi.python.org/pypi/setuptools">setuptools</a></p>
</li>
<li>
<p class="first">the following directory&nbsp;structure:</p>
<ul class="list-nobullets">
<li>
    <a href="../../../../../../listings/entry_points_project/"><i class="fa fa-folder-open"></i>&nbsp;entry_points_project/</a>
    </li>
<li>
        <ul class="list-nobullets">
<li>
        <a href="../../../../../../listings/entry_points_project/my_project/"><i class="fa fa-folder-open"></i>&nbsp;my_project/</a>
            </li>
<li>
            <ul class="list-nobullets">
<li>
                <a href="../../../../../../listings/entry_points_project/my_project/__init__.py.html"><i class="fa fa-file"></i>&nbsp;__init__.py</a>
                </li>
                <li>
                <a href="../../../../../../listings/entry_points_project/my_project/__main__.py.html"><i class="fa fa-file"></i>&nbsp;__main__.py</a>
                </li>
            </ul>
</li>
        <li>
        <a href="../../../../../../listings/entry_points_project/setup.py.html"><i class="fa fa-file"></i>&nbsp;setup.py</a>
        </li>
        </ul>
</li>
    </ul>
</li>
</ul>
<p>(<tt class="docutils literal">entry_points_project</tt> is also where the README and other auxiliary files
go, while <tt class="docutils literal">my_project</tt> contains all the Python&nbsp;code.)</p>
<p>When you’re done, you will have a project that can be executed&nbsp;by:</p>
<ul class="simple">
<li><tt class="docutils literal">python <span class="pre">-m</span> my_project</tt></li>
<li><tt class="docutils literal">my_project</tt></li>
</ul>
<p>Provided that you have your Python directory and its <tt class="docutils literal">Scripts\</tt> subdirectory on
the %PATH%, this will <strong>also work in Windows</strong>.</p>
</div>
<div class="section" id="step-1-create-a-main-py-file">
<h2>Step 1: create a <tt class="docutils literal">__main__.py</tt> file</h2>
<p>In order to implement the first desired result, you need to create a
<tt class="docutils literal">__main__.py</tt> file in your package.  This file needs to contain a <tt class="docutils literal">main()</tt>
function that takes no arguments, and also a special passage to determine code
to&nbsp;run:</p>
<p><a class="reference external" href="../../../../../../listings/entry_points_project/my_project/__main__.py.html">entry_points_project/my_project/__main__.py</a></p>
<pre class="code python"><a name="rest_code_609a4e57e099489da932fd79356812b3-1"></a><span class="kn">import</span> <span class="nn">sys</span>
<a name="rest_code_609a4e57e099489da932fd79356812b3-2"></a>
<a name="rest_code_609a4e57e099489da932fd79356812b3-3"></a>
<a name="rest_code_609a4e57e099489da932fd79356812b3-4"></a><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
<a name="rest_code_609a4e57e099489da932fd79356812b3-5"></a>    <span class="sd">"""The main routine."""</span>
<a name="rest_code_609a4e57e099489da932fd79356812b3-6"></a>    <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
<a name="rest_code_609a4e57e099489da932fd79356812b3-7"></a>        <span class="n">args</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<a name="rest_code_609a4e57e099489da932fd79356812b3-8"></a>
<a name="rest_code_609a4e57e099489da932fd79356812b3-9"></a>    <span class="k">print</span><span class="p">(</span><span class="s">"This is the main routine."</span><span class="p">)</span>
<a name="rest_code_609a4e57e099489da932fd79356812b3-10"></a>    <span class="k">print</span><span class="p">(</span><span class="s">"It should do something interesting."</span><span class="p">)</span>
<a name="rest_code_609a4e57e099489da932fd79356812b3-11"></a>
<a name="rest_code_609a4e57e099489da932fd79356812b3-12"></a>    <span class="c"># Do argument parsing here (eg. with argparse) and anything else</span>
<a name="rest_code_609a4e57e099489da932fd79356812b3-13"></a>    <span class="c"># you want your project to do.</span>
<a name="rest_code_609a4e57e099489da932fd79356812b3-14"></a>
<a name="rest_code_609a4e57e099489da932fd79356812b3-15"></a><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
<a name="rest_code_609a4e57e099489da932fd79356812b3-16"></a>    <span class="n">main</span><span class="p">()</span>
</pre>
<ol class="arabic simple">
<li>The <tt class="docutils literal">if __name__ == "__main__":</tt> idiom, as <a class="reference external" href="https://docs.python.org/3/library/__main__.html">documented here</a>, is used to check whether
this is executed as the top-level file, or if it has been imported by someone
else (in this case, executing the <tt class="docutils literal">main()</tt> function is not always&nbsp;intended).</li>
<li>The <tt class="docutils literal">main()</tt> function must not take any arguments, because that’s how
<tt class="docutils literal">entry_points</tt> executes&nbsp;things.</li>
</ol>
</div>
<div class="section" id="step-2-adjust-setup-py-accordingly">
<h2>Step 2: adjust <tt class="docutils literal">setup.py</tt> accordingly</h2>
<p>This is the real deal: create the entry points in your <tt class="docutils literal">setup.py</tt> file.</p>
<p><a class="reference external" href="../../../../../../listings/entry_points_project/setup.py.html">entry_points_project/setup.py</a></p>
<pre class="code python"><a name="rest_code_a7b57b3ab7ff4940944bea653178b220-1"></a><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span>
<a name="rest_code_a7b57b3ab7ff4940944bea653178b220-2"></a>
<a name="rest_code_a7b57b3ab7ff4940944bea653178b220-3"></a><span class="n">setup</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">'my_project'</span><span class="p">,</span>
<a name="rest_code_a7b57b3ab7ff4940944bea653178b220-4"></a>      <span class="n">version</span><span class="o">=</span><span class="s">'0.1.0'</span><span class="p">,</span>
<a name="rest_code_a7b57b3ab7ff4940944bea653178b220-5"></a>      <span class="n">packages</span><span class="o">=</span><span class="p">[</span><span class="s">'my_project'</span><span class="p">],</span>
<a name="rest_code_a7b57b3ab7ff4940944bea653178b220-6"></a>      <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
<a name="rest_code_a7b57b3ab7ff4940944bea653178b220-7"></a>          <span class="s">'console_scripts'</span><span class="p">:</span> <span class="p">[</span>
<a name="rest_code_a7b57b3ab7ff4940944bea653178b220-8"></a>              <span class="s">'my_project = my_project.__main__:main'</span>
<a name="rest_code_a7b57b3ab7ff4940944bea653178b220-9"></a>          <span class="p">]</span>
<a name="rest_code_a7b57b3ab7ff4940944bea653178b220-10"></a>      <span class="p">},</span>
<a name="rest_code_a7b57b3ab7ff4940944bea653178b220-11"></a>      <span class="p">)</span>
</pre>
<ol class="arabic">
<li>
<p class="first">You must use setuptools, otherwise this won’t&nbsp;work.</p>
</li>
<li>
<p class="first">The most important piece of code is the <tt class="docutils literal">entry_points</tt> declaration&nbsp;(unsurprisingly).</p>
</li>
<li>
<p class="first">The declaration&nbsp;reads:</p>
<pre class="literal-block">
<span class="dquo">"</span>name_of_executable = module.with:function_to_execute"
</pre>
</li>
<li>
<p class="first">If you are developing a GUI application (in Tkinter, PyQt/PySide,
WxPython, PyGTK, PyGame…), you should change the declaration to
<tt class="docutils literal">gui_scripts</tt>.</p>
</li>
<li>
<p class="first">You can create multiple scripts this way.  You can also have multiple
<tt class="docutils literal">console_scripts</tt> <em>and</em> <tt class="docutils literal">gui_scripts</tt> in one setup&nbsp;file.</p>
</li>
</ol>
<p class="text-muted">All <a class="reference external" href="../../../../../../listings/entry_points_project/">code samples</a> are Copyright © 2014 Chris Warrick and licensed
under <a class="reference external" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">CC-BY 3.0</a>.</p>
</div>
</div>
    </article>
</div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../../../08/26/speeker/" rel="prev" title="Speeker — moja mała aplikacja na Androida">Poprzedni&nbsp;post</a>
            </li>
            <li class="next">
                <a href="../../../10/13/revamping-my-projects-page-with-nikola/" rel="next" title="Revamping My Projects Page with Nikola">Następny&nbsp;post</a>
            </li>
        </ul></nav></aside><section class="comments"><h2>Komentarze</h2>
                        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="kwpolska",
            disqus_url="https://chriswarrick.com/pl/blog/2014/09/15/python-apps-the-right-way-entry_points-and-scripts/",
        disqus_title="Python Apps the Right Way: entry points and scripts",
        disqus_identifier="cache/posts/2014/09/15/entry_points.html",
        disqus_config = function () {
            this.language = "pl";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section><script>var disqus_shortname="kwpolska";(function(){var a=document.createElement("script");a.async=true;a.src="//"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div>
        <!--End of body content-->

        <footer class="site-footer"><p><a href="../../../../../cookies/">ta strona używa ciasteczek.</a><br>
korzystając z tej strony, akceptujesz naszą politykę&nbsp;ciasteczek.
</p>
<p>
powered by <strong><a href="https://getnikola.com/">Nikola</a></strong>, <a href="http://nginx.org/">nginx</a> and <a href="https://www.digitalocean.com/?refcode=7983689b2ecc">DigitalOcean</a><br>
copyright © 2009–2015 <a href="../../../../../contact/">Chris Warrick</a><br><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">CC
BY-NC-ND</a>, unless stated&nbsp;otherwise</p>
            
        </footer>
</div>


            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script><script src="../../../../../../assets/js/all.js"></script><script src="../../../../../../assets/js/colorbox-i18n/jquery.colorbox-pl.js"></script><script>jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><script>
    moment.locale("pl");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-11937989-1', 'chriswarrick.com');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>
</body>
</html>
